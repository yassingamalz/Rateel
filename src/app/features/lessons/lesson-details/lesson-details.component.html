<!-- lesson-details.component.html -->
<div class="lesson-details" [@slideDown]="animationState">
  <!-- Progress Container -->
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-fill" 
           [style.width.%]="currentProgress"
           [style.transition]="'width 300ms ease-out'"></div>
    </div>
    <div class="progress-text">{{currentProgress}}/100</div>
  </div>

  <!-- Control Button / Menu -->
  <div class="controls-area" [class.menu-open]="isMenuOpen">
    <button class="control-button" (click)="toggleMenu()">
      <i class="fas" [class.fa-pause]="!isMenuOpen" [class.fa-play]="isMenuOpen"></i>
    </button>

    <div class="menu-items" [class.active]="isMenuOpen">
      <button class="menu-item" (click)="onNavigateBack()">
        <i class="fas fa-arrow-left"></i>
      </button>

      <button class="menu-item" (click)="restart()">
        <i class="fas fa-redo"></i>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content-area">
    <div class="lesson-content" [ngSwitch]="lesson?.type">
      <app-video-player 
        *ngSwitchCase="'video'" 
        [videoUrl]="lesson?.videoUrl" 
        [isCompleted]="lesson?.isCompleted"
        (onProgress)="updateProgress($event)" 
        (onComplete)="markAsCompleted()"
        dir="rtl">
      </app-video-player>

      <app-reading-lesson 
        *ngSwitchCase="'read'" 
        [content]="lesson?.readingContent" 
        [isCompleted]="lesson?.isCompleted"
        (onProgress)="updateProgress($event)" 
        (onComplete)="markAsCompleted()">
      </app-reading-lesson>

      <app-interactive-lesson
        *ngSwitchCase="'practice'"
        [verses]="lesson?.verses || []"
        [isCompleted]="lesson?.isCompleted"
        (onProgress)="updateProgress($event)"
        (onComplete)="markAsCompleted()">
      </app-interactive-lesson>

    </div>
  </div>
</div>