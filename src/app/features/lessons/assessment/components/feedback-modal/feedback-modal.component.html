<!-- Enhanced feedback-modal.component.html -->
<div class="feedback-modal-wrapper" dir="rtl">
  <div class="feedback-modal-overlay"></div>

  <div class="feedback-modal-content" 
       [class.feedback-correct]="questionResult === 'correct'"
       [class.feedback-incorrect]="questionResult === 'incorrect'">

    <!-- Animated Feedback Icon -->
    <div class="feedback-icon" [class.bounce]="iconBounceState">
      <i *ngIf="questionResult === 'correct'" class="fas fa-check-circle"></i>
      <i *ngIf="questionResult === 'incorrect'" class="fas fa-times"></i>
    </div>

    <!-- Enhanced Feedback Title -->
    <h3 class="feedback-title">
      {{ questionResult === 'correct' ? 'إجابة صحيحة!' : 'إجابة خاطئة' }}
    </h3>

    <!-- Points Award (only for correct answers) -->
    <div class="points-award" *ngIf="questionResult === 'correct'">
      <div class="points-value">+{{ earnedPoints }}</div>
      <div class="points-label">نقطة</div>
    </div>

    <!-- Streak indicator with flame animations -->
    <div class="streak-indicator" *ngIf="currentStreak > 1 && questionResult === 'correct'">
      <div class="streak-flames">
        <i class="fas fa-fire"></i>
        <i class="fas fa-fire"></i>
        <i class="fas fa-fire"></i>
      </div>
      <div class="streak-count">{{ currentStreak }} إجابات متتالية!</div>
    </div>

    <!-- Explanation section if available -->
    <div class="explanation-content" *ngIf="question?.explanation">
      <h4 class="explanation-title">الشرح:</h4>
      <p class="explanation-text">{{ question?.explanation }}</p>
    </div>

    <!-- Correct answer section for incorrect answers -->
    <div class="correct-answer-section" *ngIf="questionResult === 'incorrect'">
      <h4 class="correct-answer-title">الإجابة الصحيحة:</h4>
      <p class="correct-answer-text">{{ correctAnswerText || 'لا توجد إجابة متاحة' }}</p>
    </div>

    <!-- Dismiss button with pulse animation -->
    <button class="dismiss-feedback" (click)="onDismiss()">
      <span>متابعة</span>
      <i class="fas fa-arrow-left"></i>
    </button>

    <!-- Confetti effect for correct answers -->
    <div class="confetti-container" *ngIf="questionResult === 'correct'"></div>
  </div>
</div>